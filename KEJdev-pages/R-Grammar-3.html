<!DOCTYPE html>
<html>
<head>
    
    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>Knn을 이용한 소개팅 데이터 분류</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/syntax.css" />
    <!-- highlight.js -->
    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style>
    
        <script type="text/x-mathjax-config">
MathJax.Hub.Config({
    TeX: {
      equationNumbers: {
        autoNumber: "AMS"
      }
    },
    tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$'] ],
    processEscapes: true,
  }
});
MathJax.Hub.Register.MessageHook("Math Processing Error",function (message) {
	  alert("Math Processing Error: "+message[1]);
	});
MathJax.Hub.Register.MessageHook("TeX Jax - parse error",function (message) {
	  alert("Math Processing Error: "+message[1]);
	});
</script>
<script type="text/javascript" async
  src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
    

    <!--[if IE]>
        <style>
            p, ol, ul{
                width: 100%;
            }
            blockquote{
                width: 100%;
            }
        </style>
    <![endif]-->
    
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="If i was rich, i would eat tteokbokki every day." />
    <link rel="shortcut icon" href="http://localhost:4000/./assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="http://localhost:4000/R-Grammar-3" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="덕복희" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Knn을 이용한 소개팅 데이터 분류" />
    <meta property="og:description" content="저번시간에 knn의 개념에 대해 알아보았습니다. 오늘부터는 knn 분류 예제를 보면서 공부해보도록 하겠습니다. knn실습을 위해서 여기에서 데이터를 다운 받아주세요. R Dataset 폴더에서 like.csv 데이터를 다운 받아주시면 됩니다! Dataset 데이터 설명을 하자면, 소개팅을 수천번하지 않기 때문에 그동안 14번정도 소개팅을 했다고 가정하고 만난 남학생들에 대한 라벨을 호감라벨로 만들었습니다. 14개의 데이터를 knn으로 학습시켜서 예측" />
    <meta property="og:url" content="http://localhost:4000/R-Grammar-3" />
    <meta property="og:image" content="http://localhost:4000/../assets/images/R_cover1.png" />
    <meta property="article:publisher" content="https://www.facebook.com/" />
    <meta property="article:author" content="https://www.facebook.com/" />
    <meta property="article:published_time" content="2018-11-01T18:00:00+09:00" />
    <meta property="article:modified_time" content="2018-11-01T18:00:00+09:00" />
    <meta property="article:tag" content="R" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Knn을 이용한 소개팅 데이터 분류" />
    <meta name="twitter:description" content="저번시간에 knn의 개념에 대해 알아보았습니다. 오늘부터는 knn 분류 예제를 보면서 공부해보도록 하겠습니다. knn실습을 위해서 여기에서 데이터를 다운 받아주세요. R Dataset 폴더에서 like.csv 데이터를 다운 받아주시면 됩니다! Dataset 데이터 설명을 하자면, 소개팅을 수천번하지 않기 때문에 그동안 14번정도 소개팅을 했다고 가정하고 만난 남학생들에 대한 라벨을 호감라벨로 만들었습니다. 14개의 데이터를 knn으로 학습시켜서 예측" />
    <meta name="twitter:url" content="http://localhost:4000/" />
    <meta name="twitter:image" content="http://localhost:4000/../assets/images/R_cover1.png" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="덕복희" />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="R" />
    <meta name="twitter:site" content="@" />
    <meta name="twitter:creator" content="@" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "덕복희",
        "logo": "http://localhost:4000/./assets/images/blog-icon.png"
    },
    "url": "http://localhost:4000/R-Grammar-3",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:4000/../assets/images/R_cover1.png",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/R-Grammar-3"
    },
    "description": "저번시간에 knn의 개념에 대해 알아보았습니다. 오늘부터는 knn 분류 예제를 보면서 공부해보도록 하겠습니다. knn실습을 위해서 여기에서 데이터를 다운 받아주세요. R Dataset 폴더에서 like.csv 데이터를 다운 받아주시면 됩니다! Dataset 데이터 설명을 하자면, 소개팅을 수천번하지 않기 때문에 그동안 14번정도 소개팅을 했다고 가정하고 만난 남학생들에 대한 라벨을 호감라벨로 만들었습니다. 14개의 데이터를 knn으로 학습시켜서 예측"
}
    </script>
    
    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="Knn을 이용한 소개팅 데이터 분류" href="/feed.xml" />

    <script data-ad-client="ca-pub-5107584879184113" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({
        google_ad_client: "ca-pub-5107584879184113",
        enable_page_level_ads: true
      });
    </script>
</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    
    <div class="site-nav-right">
        
            <ul class="nav" role="menu">
    <li class="nav-HOME" role="menuitem"><a href="/">HOME</a></li>
    <li class="nav-SQL" role="menuitem"><a href="/tag/sql/">SQL</a></li>
    <li class="nav-PLSQL" role="menuitem"><a href="/tag/plsql/">PLSQL</a></li>
    <li class="nav-R" role="menuitem"><a href="/tag/r/">R</a></li>
    <li class="nav-PYTHON" role="menuitem"><a href="/tag/python/">PYTHON</a></li>
    <li class="nav-MACHINE-LEARNING" role="menuitem"><a href="/tag/machine-learning/">MACHINE-LEARNING</a></li>
    <li class="nav-PAPER" role="menuitem"><a href="/tag/paper/">PAPER</a></li>
    <li class="nav-ALGORITHM" role="menuitem"><a href="/tag/algorithm/">ALGORITHM</a></li>     
</ul>

        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full post tag-r ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime=" 1 November 2018"> 1 November 2018</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/r/'>R</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">Knn을 이용한 소개팅 데이터 분류</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/../assets/images/R_cover1.png)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <p>저번시간에 knn의 개념에 대해 알아보았습니다. <br />
오늘부터는 knn 분류 예제를 보면서 공부해보도록 하겠습니다.</p>

<p>knn실습을 위해서 <a href="https://github.com/KEJdev/DataSet">여기</a>에서 데이터를 다운 받아주세요.<br />
R Dataset 폴더에서 like.csv 데이터를 다운 받아주시면 됩니다!</p>

<p><br /></p>

<blockquote>
  <h4 id="dataset">Dataset</h4>
</blockquote>

<p>데이터 설명을 하자면, 소개팅을 수천번하지 않기 때문에 그동안 14번정도 소개팅을 했다고 가정하고 만난 남학생들에 대한 라벨을 호감라벨로 만들었습니다.</p>

<p>14개의 데이터를 knn으로 학습시켜서 예측 모델을 생성하고, 새로 만나게 될 남학생에 대한 데이터로 이 학생의 호감 라벨을 예측해보려고 합니다.</p>

<p>머신러닝을 할 때는 필수적으로 데이터 전처리라고 하는 Input 데이터를 알고리즘에 맞게 잘 정재하는 작업이 필요합니다. 이것을 표준화 또는 정규화 작업이라고도 합니다.</p>

<p>데이터 양이 작을 경우에는 scale() 이란 함수를 사용합니다.<br />
<strong><center> 음수 ~ 양수 </center></strong></p>

<p>반대로 데이터의 양이 많을 경우에는 nomalize() 이란 함수를 사용합니다.<br />
<strong><center> 0 ~ 100 </center></strong></p>

<p><br /></p>

<blockquote>
  <h4 id="왜-표준화나-정규화를-해야하는가">왜 표준화나 정규화를 해야하는가?</h4>
</blockquote>

<p>어떤 데이터는 cm이고 어떤 데이터는 kg이면 결과가 제대로 나올수가 없기 때문입니다.<br />
그래서 cm이던 kg이던 0~100 사이의 데이터로 일관되게 만드는 작업이 필요합니다.</p>

<p>정규화 공식을 쉽게 보면 아래와 같습니다.</p>

<center>값 - 평균값 </center>
<center>------------------</center>
<center>표준편차</center>

<p>그럼 이제 knn을 이용하여 간단하게 분류를 해볼까요 ?</p>

<p><br /></p>

<blockquote>
  <h4 id="knn-example">knn Example</h4>
</blockquote>

<p>R에서 csv파일을 불러올때는 아래와 같이 하면 불러올 수 있습니다.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">like</span><span class="o">&lt;-</span><span class="n">read.csv</span><span class="p">(</span><span class="s2">"like.csv"</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">T</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>출력하면 아래의 데이터가 나오는 것을 확인할 수 있습니다.</p>

<center><img src="../assets/images/R1.png" width="400" height="300" /></center>

<p>한글 컬럼명이 너무 긴것 같지 않나요 ?  생각보다 불편한거 같습니다.<br />
그러니, 컬럼명을 바꿔볼까요 ??</p>

<p>컬럼명은 아래와 같이 입력하면 바꿀 수 있습니다.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">colnames</span><span class="p">(</span><span class="n">like</span><span class="p">)</span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="w"> </span><span class="s2">"taik"</span><span class="w"> </span><span class="p">,</span><span class="s2">"book"</span><span class="w"> </span><span class="p">,</span><span class="s2">"travel"</span><span class="p">,</span><span class="w"> </span><span class="s2">"school"</span><span class="w"> </span><span class="p">,</span><span class="s2">"tall"</span><span class="w"> </span><span class="p">,</span><span class="s2">"skin"</span><span class="p">,</span><span class="w"> </span><span class="s2">"muslce"</span><span class="w"> </span><span class="p">,</span><span class="s2">"label"</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>출력하면 아래와 같이 컬럼명이 변경되어 나오는 것을 확인할 수 있습니다.</p>

<center><img src="../assets/images/R2.png" width="350" height="230" /></center>

<p>이제 knn을 이용해서 분류를 하려고 하는데 맨 끝 컬럼에 있는 label과 data를 분리해야합니다. 분리는 아래와 같이 하시면 컬럼을 분리하실 수 있습니다.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">train_data</span><span class="o">&lt;-</span><span class="n">like</span><span class="p">[,</span><span class="m">-8</span><span class="p">]</span><span class="w">
</span><span class="n">train_label</span><span class="o">&lt;-</span><span class="n">like</span><span class="p">[,</span><span class="m">8</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>[,-8]은 8번째 컬럼을 제외하고 라는 뜻이고, [,8]는 8번째 컬럼만 이라는 뜻이예요. 이제 진짜 knn을 사용해서 분류를 하려고 하는데 간단하게 test 데이터를 만들고 분류를 해보겠습니다. 여기서 test data는 위에서 언급했듯이 새로 만나게 될 사람에 대한 호감 라벨을 알아보기 위한 데이터예요. 데이터를 생성을 위해 아래의 코드를 넣어 데이터를 생성해주세요.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">test.data</span><span class="o">&lt;-</span><span class="n">data.frame</span><span class="p">(</span><span class="n">talk</span><span class="o">=</span><span class="m">70</span><span class="p">,</span><span class="w"> </span><span class="n">book</span><span class="o">=</span><span class="m">50</span><span class="p">,</span><span class="n">travel</span><span class="o">=</span><span class="m">30</span><span class="p">,</span><span class="n">school</span><span class="o">=</span><span class="m">70</span><span class="p">,</span><span class="w"> </span><span class="n">tall</span><span class="o">=</span><span class="m">70</span><span class="p">,</span><span class="w"> </span><span class="n">skin</span><span class="o">=</span><span class="m">40</span><span class="p">,</span><span class="n">muslce</span><span class="o">=</span><span class="m">50</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>데이터를 넣었으면, 이제 knn분류를 해보겠습니다. 아래와 같이 코드를 작성해주세요.</p>

<div class="language-r highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">library</span><span class="p">(</span><span class="n">class</span><span class="p">)</span><span class="w">
</span><span class="n">result</span><span class="o">&lt;-</span><span class="w"> </span><span class="n">knn</span><span class="p">(</span><span class="n">train_data</span><span class="p">,</span><span class="w"> </span><span class="n">test.data</span><span class="p">,</span><span class="w"> </span><span class="n">train_label</span><span class="p">,</span><span class="w"> </span><span class="n">k</span><span class="o">=</span><span class="m">3</span><span class="w"> </span><span class="p">,</span><span class="w"> </span><span class="n">prob</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span><span class="w">
</span></code></pre></div></div>

<p>그리고 출력하면 3타입이라는 결과를 얻을 수 있습니다.<br />
knn은 생각보다 엄청 간단하다라는 것을 알 수 있죠?</p>

<p>그렇다면 위의 모델을 다시 생성하는데, k값을 다르게 했을때, 호감 라벨이 어떻게 변화하는지 확인해보세요.<br />
여기서 <strong>주의</strong> 해야할 점은 k값이 너무 크면 분류를 잘못하고 k값이 너무 작으면 테스트 데이터에만 너무 익숙해져요. 그러면 나중에 새로운 데이터를 분류할때, 분류를 잘 못하는 현상이 일어나는데, 이것을 <strong>오버피팅</strong>이라고합니다. 앞으로 머신러닝을 다루게 되면 가장 많이 나오는 단어중 하나예요. 잘 기억해두세요 ~!</p>

<p>R에 대한 전체 코드는 <a href="https://github.com/KEJdev/R-Example">여기</a>에서 볼 수 있습니다.</p>


                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/KEJdev">KEJdev</a></h4>
                                
                                    <p>If i was rich, I would eat tteokbokki every day.</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/KEJdev">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/./assets/images/covers.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; 덕복희 &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/r/">R</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/R-Grammar-2">Knn(K-Nearest Neighbors)이란?</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/R-Grammar-1">R을 배워야 하는 이유</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/r/">
                                
                                    See all 2 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/ML-Grammar-1">
                <div class="post-card-image" style="background-image: url(/../assets/images/ML_cover1.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/ML-Grammar-1">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Machine-learning</span>
                            
                        
                    

                    <h2 class="post-card-title">퍼셉트론(Perceptron)이란?</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <span class="post-card-author">
                            <a href="/author/KEJdev/">KEJdev</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                

    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/R-Grammar-2">
                <div class="post-card-image" style="background-image: url(/../assets/images/R_cover1.png)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/R-Grammar-2">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">R</span>
                            
                        
                    

                    <h2 class="post-card-title">Knn(K-Nearest Neighbors)이란?</h2>
                </header>
                <section class="post-card-excerpt">
                    
                        <p></p>
                    
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <span class="post-card-author">
                            <a href="/author/KEJdev/">KEJdev</a>
                        </span>
                    
                
                <span class="reading-time">
                    
                    
                      1 min read
                    
                </span>
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
     
            
                <img src="/./assets/images/blog-icon.png" alt="덕복희 icon" />
            
            <span>덕복희</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">Knn을 이용한 소개팅 데이터 분류</div>
    
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>




        <!-- Previous/next page links - displayed on every page -->
        
        <script data-ad-client="ca-pub-5107584879184113" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
        <script>
          (adsbygoogle = window.adsbygoogle || []).push({
            google_ad_client: "ca-pub-5107584879184113",
            enable_page_level_ads: true
          });
        </script>
        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                    <img class="subscribe-overlay-logo" src="/./assets/images/blog-icon.png" alt="덕복희" />
                
            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-148043528-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
